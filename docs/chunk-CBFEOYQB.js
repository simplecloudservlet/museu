import{$ as Bt,A as he,B as Dt,C as Ao,D as Tt,E as kt,F as Ht,G as Wt,H as jt,I as Po,J as X,K as $t,L as ge,M as Ut,N as Ft,O as Co,P as Lt,Q as zt,R as Ro,S as Ot,T as wo,U as qt,V as _o,W as Kt,X as vo,Y as Nt,Z as Io,_ as Mt,a as Ge,aa as Do,b as lo,c as Je,d as mo,e as Xe,f as uo,g as ut,h as pt,i as ft,j as ht,k as yo,l as gt,m as yt,n as So,o as Eo,p as G,q as xo,r as St,s as Et,t as xt,u as bo,y as fe,z as It}from"./chunk-HGZ5NAYE.js";import{$ as lt,B as V,C as Ze,D as et,G as tt,H as nt,I as ho,J as rt,K as it,L as go,P as me,R as ct,S as f,T as ue,V as at,_ as dt,da as mt,ha as bt,ia as J,ja as pe,ka as At,la as Pt,ma as v,na as Ct,o as Ne,oa as Rt,p as Me,pa as wt,qa as _t,s as Be,sa as vt,v as Ve,va as P,w as Qe,x as le,y as po,z as Ye}from"./chunk-Z2O23HM3.js";import{a as i,b as T,d as u,i as l,n as st,p as ot,q as fo}from"./chunk-PLB35GLF.js";function To(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function ko(e){return{schemeId:"smithy.api#noAuth"}}var Vt,Gt,Ho,Jt,ye=u(()=>{"use strict";he();po();N();Vt=(e,s,t)=>l(null,null,function*(){return{operation:Qe(s).operation,region:(yield le(e.region)())||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}});Gt=e=>{let s=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{s.push(ko(e));break}default:s.push(To(e))}return s},Ho=e=>Object.assign(e,{stsClientCtor:R}),Jt=e=>{let s=Ho(e),t=Et(s);return Object.assign(t,{authSchemePreference:le(e.authSchemePreference??[])})}});var Xt,Q,Y=u(()=>{"use strict";Xt=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Q={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Yt,Qt=u(()=>{Yt={name:"@aws-sdk/nested-clients",version:"3.896.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.896.0","@aws-sdk/middleware-host-header":"3.893.0","@aws-sdk/middleware-logger":"3.893.0","@aws-sdk/middleware-recursion-detection":"3.893.0","@aws-sdk/middleware-user-agent":"3.896.0","@aws-sdk/region-config-resolver":"3.893.0","@aws-sdk/types":"3.893.0","@aws-sdk/util-endpoints":"3.895.0","@aws-sdk/util-user-agent-browser":"3.893.0","@aws-sdk/util-user-agent-node":"3.896.0","@smithy/config-resolver":"^4.2.2","@smithy/core":"^3.12.0","@smithy/fetch-http-handler":"^5.2.1","@smithy/hash-node":"^4.1.1","@smithy/invalid-dependency":"^4.1.1","@smithy/middleware-content-length":"^4.1.1","@smithy/middleware-endpoint":"^4.2.4","@smithy/middleware-retry":"^4.3.0","@smithy/middleware-serde":"^4.1.1","@smithy/middleware-stack":"^4.1.1","@smithy/node-config-provider":"^4.2.2","@smithy/node-http-handler":"^4.2.1","@smithy/protocol-http":"^5.2.1","@smithy/smithy-client":"^4.6.4","@smithy/types":"^4.5.0","@smithy/url-parser":"^4.1.1","@smithy/util-base64":"^4.1.0","@smithy/util-body-length-browser":"^4.1.0","@smithy/util-body-length-node":"^4.1.0","@smithy/util-defaults-mode-browser":"^4.1.4","@smithy/util-defaults-mode-node":"^4.1.4","@smithy/util-endpoints":"^3.1.2","@smithy/util-middleware":"^4.1.1","@smithy/util-retry":"^4.1.2","@smithy/util-utf8":"^4.1.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var ds,r,a,I,h,ls,ms,m,Zt,C,k,Ee,es,Se,us,ts,g,ss,ps,fs,y,E,os,hs,gs,ns,ys,rs,is,cs,as,jo,Ss,Es=u(()=>{"use strict";ds="required",r="type",a="argv",I="booleanEquals",h="stringEquals",ls="sigv4",ms="us-east-1",m="endpoint",Zt="https://sts.{Region}.{PartitionResult#dnsSuffix}",C="tree",k="error",Ee="getAttr",es={[ds]:!1,[r]:"String"},Se={[ds]:!0,default:!1,[r]:"Boolean"},us={ref:"Endpoint"},ts={fn:"isSet",[a]:[{ref:"Region"}]},g={ref:"Region"},ss={fn:"aws.partition",[a]:[g],assign:"PartitionResult"},ps={ref:"UseFIPS"},fs={ref:"UseDualStack"},y={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:ls,signingName:"sts",signingRegion:ms}]},headers:{}},E={},os={conditions:[{fn:h,[a]:[g,"aws-global"]}],[m]:y,[r]:m},hs={fn:I,[a]:[ps,!0]},gs={fn:I,[a]:[fs,!0]},ns={fn:Ee,[a]:[{ref:"PartitionResult"},"supportsFIPS"]},ys={ref:"PartitionResult"},rs={fn:I,[a]:[!0,{fn:Ee,[a]:[ys,"supportsDualStack"]}]},is=[{fn:"isSet",[a]:[us]}],cs=[hs],as=[gs],jo={version:"1.0",parameters:{Region:es,UseDualStack:Se,UseFIPS:Se,Endpoint:es,UseGlobalEndpoint:Se},rules:[{conditions:[{fn:I,[a]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[a]:is},ts,ss,{fn:I,[a]:[ps,!1]},{fn:I,[a]:[fs,!1]}],rules:[{conditions:[{fn:h,[a]:[g,"ap-northeast-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"ap-south-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"ap-southeast-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"ap-southeast-2"]}],endpoint:y,[r]:m},os,{conditions:[{fn:h,[a]:[g,"ca-central-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"eu-central-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"eu-north-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"eu-west-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"eu-west-2"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"eu-west-3"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"sa-east-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,ms]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"us-east-2"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"us-west-1"]}],endpoint:y,[r]:m},{conditions:[{fn:h,[a]:[g,"us-west-2"]}],endpoint:y,[r]:m},{endpoint:{url:Zt,properties:{authSchemes:[{name:ls,signingName:"sts",signingRegion:"{Region}"}]},headers:E},[r]:m}],[r]:C},{conditions:is,rules:[{conditions:cs,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[r]:k},{conditions:as,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[r]:k},{endpoint:{url:us,properties:E,headers:E},[r]:m}],[r]:C},{conditions:[ts],rules:[{conditions:[ss],rules:[{conditions:[hs,gs],rules:[{conditions:[{fn:I,[a]:[!0,ns]},rs],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:E,headers:E},[r]:m}],[r]:C},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[r]:k}],[r]:C},{conditions:cs,rules:[{conditions:[{fn:I,[a]:[ns,!0]}],rules:[{conditions:[{fn:h,[a]:[{fn:Ee,[a]:[ys,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:E,headers:E},[r]:m},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:E,headers:E},[r]:m}],[r]:C},{error:"FIPS is enabled but this partition does not support FIPS",[r]:k}],[r]:C},{conditions:as,rules:[{conditions:[rs],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:E,headers:E},[r]:m}],[r]:C},{error:"DualStack is enabled but this partition does not support DualStack",[r]:k}],[r]:C},os,{endpoint:{url:Zt,properties:E,headers:E},[r]:m}],[r]:C}],[r]:C},{error:"Invalid Configuration: Missing Region",[r]:k}]},Ss=jo});var $o,xs,bs=u(()=>{"use strict";Eo();yo();Es();$o=new pt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),xs=(e,s={})=>$o.get(e,()=>ht(Ss,{endpointParams:e,logger:s.logger}));ft.aws=gt});var As,Ps=u(()=>{"use strict";he();mt();P();So();ho();fo();ye();bs();As=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??tt,base64Encoder:e?.base64Encoder??nt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??xs,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Gt,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new St},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(()=>l(null,null,function*(){return{}})),signer:new lt}],logger:e?.logger??new vt,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??yt,utf8Decoder:e?.utf8Decoder??st,utf8Encoder:e?.utf8Encoder??ot})});var Cs,Rs=u(()=>{"use strict";Qt();wo();_o();Wt();go();vo();bo();Co();Ps();P();Io();Cs=e=>{let s=Nt(e),t=()=>s().then(Rt),o=As(e);return T(i(i({},o),e),{runtime:"browser",defaultsMode:s,bodyLengthChecker:e?.bodyLengthChecker??xt,credentialDefaultProvider:e?.credentialDefaultProvider??(n=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??qt({serviceId:o.serviceId,clientVersion:Yt.version}),maxAttempts:e?.maxAttempts??Ut,region:e?.region??Kt("Region is missing"),requestHandler:rt.create(e?.requestHandler??t),retryMode:e?.retryMode??(()=>l(null,null,function*(){return(yield t()).retryMode||Ft})),sha256:e?.sha256??Ot,streamCollector:e?.streamCollector??it,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(Tt)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(kt))})}});var ws,_s,vs=u(()=>{"use strict";ws=e=>{let s=e.httpAuthSchemes,t=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let d=s.findIndex(c=>c.schemeId===n.schemeId);d===-1?s.push(n):s.splice(d,1,n)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(n){t=n},httpAuthSchemeProvider(){return t},setCredentials(n){o=n},credentials(){return o}}},_s=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Is,Ds=u(()=>{"use strict";Do();Ve();P();vs();Is=(e,s)=>{let t=Object.assign(Mt(e),wt(e),Ne(e),ws(e));return s.forEach(o=>o.configure(t)),Object.assign(e,Bt(t),_t(t),Me(t),_s(t))}});var R,N=u(()=>{"use strict";lo();mo();uo();Ao();Wt();mt();Po();ge();Ro();P();ye();Y();Rs();Ds();R=class extends bt{config;constructor(...[s]){let t=Cs(s||{});super(t),this.initConfig=t;let o=Xt(t),n=ut(o),d=Lt(n),c=Ht(d),S=c,b=$t(S),A=Jt(b),D=Is(A,s?.extensions||[]);this.config=D,this.middlewareStack.use(Dt(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use(jt(this.config)),this.middlewareStack.use(Ge(this.config)),this.middlewareStack.use(Je(this.config)),this.middlewareStack.use(Xe(this.config)),this.middlewareStack.use(Ye(this.config,{httpAuthSchemeParametersProvider:Vt,identityProviderConfigProvider:K=>l(this,null,function*(){return new dt({"aws.auth#sigv4":K.credentials})})})),this.middlewareStack.use(et(this.config))}destroy(){super.destroy()}}});var x,Z=u(()=>{"use strict";P();x=class e extends Pt{constructor(s){super(s),Object.setPrototypeOf(this,e.prototype)}}});var Ts,ks,ee,te,se,oe,ne,re,Hs,Ws,ie,M=u(()=>{"use strict";P();Z();Ts=e=>i(i({},e),e.SecretAccessKey&&{SecretAccessKey:pe}),ks=e=>i(i({},e),e.Credentials&&{Credentials:Ts(e.Credentials)}),ee=class e extends x{name="ExpiredTokenException";$fault="client";constructor(s){super(i({name:"ExpiredTokenException",$fault:"client"},s)),Object.setPrototypeOf(this,e.prototype)}},te=class e extends x{name="MalformedPolicyDocumentException";$fault="client";constructor(s){super(i({name:"MalformedPolicyDocumentException",$fault:"client"},s)),Object.setPrototypeOf(this,e.prototype)}},se=class e extends x{name="PackedPolicyTooLargeException";$fault="client";constructor(s){super(i({name:"PackedPolicyTooLargeException",$fault:"client"},s)),Object.setPrototypeOf(this,e.prototype)}},oe=class e extends x{name="RegionDisabledException";$fault="client";constructor(s){super(i({name:"RegionDisabledException",$fault:"client"},s)),Object.setPrototypeOf(this,e.prototype)}},ne=class e extends x{name="IDPRejectedClaimException";$fault="client";constructor(s){super(i({name:"IDPRejectedClaimException",$fault:"client"},s)),Object.setPrototypeOf(this,e.prototype)}},re=class e extends x{name="InvalidIdentityTokenException";$fault="client";constructor(s){super(i({name:"InvalidIdentityTokenException",$fault:"client"},s)),Object.setPrototypeOf(this,e.prototype)}},Hs=e=>i(i({},e),e.WebIdentityToken&&{WebIdentityToken:pe}),Ws=e=>i(i({},e),e.Credentials&&{Credentials:Ts(e.Credentials)}),ie=class e extends x{name="IDPCommunicationErrorException";$fault="client";constructor(s){super(i({name:"IDPCommunicationErrorException",$fault:"client"},s)),Object.setPrototypeOf(this,e.prototype)}}});var js,$s,Us,Fs,Ls,Uo,Fo,Lo,zo,Oo,qo,Ko,No,Mo,zs,Bo,Vo,Go,Jo,Xo,Qo,Os,Yo,Zo,qs,en,tn,sn,on,nn,rn,cn,_,an,Ks,Ns,Ms,Bs,xe,dn,be,H,ln,Ae,Pe,W,Ce,j,Re,we,_e,$,U,ve,Ie,De,F,Te,L,z,ke,He,w,We,je,$e,Ue,Fe,Vs,Le,ze,Oe,p,Gs,mn,qe=u(()=>{"use strict";he();Ve();P();M();Z();js=(e,s)=>l(null,null,function*(){let t=Ns,o;return o=Gs(T(i({},No(e,s)),{[Bs]:dn,[Vs]:Ms})),Ks(s,t,"/",void 0,o)}),$s=(e,s)=>l(null,null,function*(){let t=Ns,o;return o=Gs(T(i({},Mo(e,s)),{[Bs]:ln,[Vs]:Ms})),Ks(s,t,"/",void 0,o)}),Us=(e,s)=>l(null,null,function*(){if(e.statusCode>=300)return Ls(e,s);let t=yield fe(e.body,s),o={};return o=Yo(t.AssumeRoleResult,s),i({$metadata:_(e)},o)}),Fs=(e,s)=>l(null,null,function*(){if(e.statusCode>=300)return Ls(e,s);let t=yield fe(e.body,s),o={};return o=Zo(t.AssumeRoleWithWebIdentityResult,s),i({$metadata:_(e)},o)}),Ls=(e,s)=>l(null,null,function*(){let t=T(i({},e),{body:yield It(e.body,s)}),o=mn(e,t.body);switch(o){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw yield Uo(t,s);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw yield Oo(t,s);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw yield qo(t,s);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw yield Ko(t,s);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw yield Fo(t,s);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw yield Lo(t,s);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw yield zo(t,s);default:let n=t.body;return an({output:e,parsedBody:n.Error,errorCode:o})}}),Uo=(e,s)=>l(null,null,function*(){let t=e.body,o=en(t.Error,s),n=new ee(i({$metadata:_(e)},o));return v(n,t)}),Fo=(e,s)=>l(null,null,function*(){let t=e.body,o=tn(t.Error,s),n=new ie(i({$metadata:_(e)},o));return v(n,t)}),Lo=(e,s)=>l(null,null,function*(){let t=e.body,o=sn(t.Error,s),n=new ne(i({$metadata:_(e)},o));return v(n,t)}),zo=(e,s)=>l(null,null,function*(){let t=e.body,o=on(t.Error,s),n=new re(i({$metadata:_(e)},o));return v(n,t)}),Oo=(e,s)=>l(null,null,function*(){let t=e.body,o=nn(t.Error,s),n=new te(i({$metadata:_(e)},o));return v(n,t)}),qo=(e,s)=>l(null,null,function*(){let t=e.body,o=rn(t.Error,s),n=new se(i({$metadata:_(e)},o));return v(n,t)}),Ko=(e,s)=>l(null,null,function*(){let t=e.body,o=cn(t.Error,s),n=new oe(i({$metadata:_(e)},o));return v(n,t)}),No=(e,s)=>{let t={};if(e[L]!=null&&(t[L]=e[L]),e[z]!=null&&(t[z]=e[z]),e[U]!=null){let o=zs(e[U],s);e[U]?.length===0&&(t.PolicyArns=[]),Object.entries(o).forEach(([n,d])=>{let c=`PolicyArns.${n}`;t[c]=d})}if(e[$]!=null&&(t[$]=e[$]),e[j]!=null&&(t[j]=e[j]),e[$e]!=null){let o=Qo(e[$e],s);e[$e]?.length===0&&(t.Tags=[]),Object.entries(o).forEach(([n,d])=>{let c=`Tags.${n}`;t[c]=d})}if(e[Fe]!=null){let o=Xo(e[Fe],s);e[Fe]?.length===0&&(t.TransitiveTagKeys=[]),Object.entries(o).forEach(([n,d])=>{let c=`TransitiveTagKeys.${n}`;t[c]=d})}if(e[we]!=null&&(t[we]=e[we]),e[We]!=null&&(t[We]=e[We]),e[Ue]!=null&&(t[Ue]=e[Ue]),e[w]!=null&&(t[w]=e[w]),e[Ie]!=null){let o=Go(e[Ie],s);e[Ie]?.length===0&&(t.ProvidedContexts=[]),Object.entries(o).forEach(([n,d])=>{let c=`ProvidedContexts.${n}`;t[c]=d})}return t},Mo=(e,s)=>{let t={};if(e[L]!=null&&(t[L]=e[L]),e[z]!=null&&(t[z]=e[z]),e[ze]!=null&&(t[ze]=e[ze]),e[De]!=null&&(t[De]=e[De]),e[U]!=null){let o=zs(e[U],s);e[U]?.length===0&&(t.PolicyArns=[]),Object.entries(o).forEach(([n,d])=>{let c=`PolicyArns.${n}`;t[c]=d})}return e[$]!=null&&(t[$]=e[$]),e[j]!=null&&(t[j]=e[j]),t},zs=(e,s)=>{let t={},o=1;for(let n of e){if(n===null)continue;let d=Bo(n,s);Object.entries(d).forEach(([c,S])=>{t[`member.${o}.${c}`]=S}),o++}return t},Bo=(e,s)=>{let t={};return e[Oe]!=null&&(t[Oe]=e[Oe]),t},Vo=(e,s)=>{let t={};return e[ve]!=null&&(t[ve]=e[ve]),e[Ce]!=null&&(t[Ce]=e[Ce]),t},Go=(e,s)=>{let t={},o=1;for(let n of e){if(n===null)continue;let d=Vo(n,s);Object.entries(d).forEach(([c,S])=>{t[`member.${o}.${c}`]=S}),o++}return t},Jo=(e,s)=>{let t={};return e[_e]!=null&&(t[_e]=e[_e]),e[Le]!=null&&(t[Le]=e[Le]),t},Xo=(e,s)=>{let t={},o=1;for(let n of e)n!==null&&(t[`member.${o}`]=n,o++);return t},Qo=(e,s)=>{let t={},o=1;for(let n of e){if(n===null)continue;let d=Jo(n,s);Object.entries(d).forEach(([c,S])=>{t[`member.${o}.${c}`]=S}),o++}return t},Os=(e,s)=>{let t={};return e[be]!=null&&(t[be]=f(e[be])),e[Ae]!=null&&(t[Ae]=f(e[Ae])),t},Yo=(e,s)=>{let t={};return e[W]!=null&&(t[W]=qs(e[W],s)),e[H]!=null&&(t[H]=Os(e[H],s)),e[F]!=null&&(t[F]=ue(e[F])),e[w]!=null&&(t[w]=f(e[w])),t},Zo=(e,s)=>{let t={};return e[W]!=null&&(t[W]=qs(e[W],s)),e[He]!=null&&(t[He]=f(e[He])),e[H]!=null&&(t[H]=Os(e[H],s)),e[F]!=null&&(t[F]=ue(e[F])),e[Te]!=null&&(t[Te]=f(e[Te])),e[Pe]!=null&&(t[Pe]=f(e[Pe])),e[w]!=null&&(t[w]=f(e[w])),t},qs=(e,s)=>{let t={};return e[xe]!=null&&(t[xe]=f(e[xe])),e[ke]!=null&&(t[ke]=f(e[ke])),e[je]!=null&&(t[je]=f(e[je])),e[Re]!=null&&(t[Re]=ct(at(e[Re]))),t},en=(e,s)=>{let t={};return e[p]!=null&&(t[p]=f(e[p])),t},tn=(e,s)=>{let t={};return e[p]!=null&&(t[p]=f(e[p])),t},sn=(e,s)=>{let t={};return e[p]!=null&&(t[p]=f(e[p])),t},on=(e,s)=>{let t={};return e[p]!=null&&(t[p]=f(e[p])),t},nn=(e,s)=>{let t={};return e[p]!=null&&(t[p]=f(e[p])),t},rn=(e,s)=>{let t={};return e[p]!=null&&(t[p]=f(e[p])),t},cn=(e,s)=>{let t={};return e[p]!=null&&(t[p]=f(e[p])),t},_=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),an=Ct(x),Ks=(e,s,t,o,n)=>l(null,null,function*(){let{hostname:d,protocol:c="https",port:S,path:b}=yield e.endpoint(),A={protocol:c,hostname:d,port:S,method:"POST",path:b.endsWith("/")?b.slice(0,-1)+t:b+t,headers:s};return o!==void 0&&(A.hostname=o),n!==void 0&&(A.body=n),new Be(A)}),Ns={"content-type":"application/x-www-form-urlencoded"},Ms="2011-06-15",Bs="Action",xe="AccessKeyId",dn="AssumeRole",be="AssumedRoleId",H="AssumedRoleUser",ln="AssumeRoleWithWebIdentity",Ae="Arn",Pe="Audience",W="Credentials",Ce="ContextAssertion",j="DurationSeconds",Re="Expiration",we="ExternalId",_e="Key",$="Policy",U="PolicyArns",ve="ProviderArn",Ie="ProvidedContexts",De="ProviderId",F="PackedPolicySize",Te="Provider",L="RoleArn",z="RoleSessionName",ke="SecretAccessKey",He="SubjectFromWebIdentityToken",w="SourceIdentity",We="SerialNumber",je="SessionToken",$e="Tags",Ue="TokenCode",Fe="TransitiveTagKeys",Vs="Version",Le="Value",ze="WebIdentityToken",Oe="arn",p="message",Gs=e=>Object.entries(e).map(([s,t])=>me(s)+"="+me(t)).join("&"),mn=(e,s)=>{if(s.Error?.Code!==void 0)return s.Error.Code;if(e.statusCode==404)return"NotFound"}});var O,ce=u(()=>{"use strict";ge();Ze();P();Y();M();qe();O=class extends J.classBuilder().ep(Q).m(function(s,t,o,n){return[V(o,this.serialize,this.deserialize),X(o,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,ks).ser(js).de(Us).build(){}});var q,ae=u(()=>{"use strict";ge();Ze();P();Y();M();qe();q=class extends J.classBuilder().ep(Q).m(function(s,t,o,n){return[V(o,this.serialize,this.deserialize),X(o,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Hs,Ws).ser($s).de(Fs).build(){}});var un,Ke,Js=u(()=>{"use strict";P();ce();ae();N();un={AssumeRoleCommand:O,AssumeRoleWithWebIdentityCommand:q},Ke=class extends R{};At(un,Ke)});var Xs=u(()=>{"use strict";ce();ae()});var Qs=u(()=>{"use strict";M()});var Ys,Zs,eo,to,so,oo,no=u(()=>{"use strict";xo();ce();ae();Ys="us-east-1",Zs=e=>{if(typeof e?.Arn=="string"){let s=e.Arn.split(":");if(s.length>4&&s[4]!=="")return s[4]}},eo=(e,s,t)=>l(null,null,function*(){let o=typeof e=="function"?yield e():e,n=typeof s=="function"?yield s():s;return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${o} (provider)`,`${n} (parent client)`,`${Ys} (STS default)`),o??n??Ys}),to=(e,s)=>{let t,o;return(n,d)=>l(null,null,function*(){if(o=n,!t){let{logger:D=e?.parentClientConfig?.logger,region:K,requestHandler:B=e?.parentClientConfig?.requestHandler,credentialProviderLogger:de}=e,co=yield eo(K,e?.parentClientConfig?.region,de),ao=!oo(B);t=new s({profile:e?.parentClientConfig?.profile,credentialDefaultProvider:()=>()=>l(null,null,function*(){return o}),region:co,requestHandler:ao?B:void 0,logger:D})}let{Credentials:c,AssumedRoleUser:S}=yield t.send(new O(d));if(!c||!c.AccessKeyId||!c.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${d.RoleArn}`);let b=Zs(S),A=i(i({accessKeyId:c.AccessKeyId,secretAccessKey:c.SecretAccessKey,sessionToken:c.SessionToken,expiration:c.Expiration},c.CredentialScope&&{credentialScope:c.CredentialScope}),b&&{accountId:b});return G(A,"CREDENTIALS_STS_ASSUME_ROLE","i"),A})},so=(e,s)=>{let t;return o=>l(null,null,function*(){if(!t){let{logger:b=e?.parentClientConfig?.logger,region:A,requestHandler:D=e?.parentClientConfig?.requestHandler,credentialProviderLogger:K}=e,B=yield eo(A,e?.parentClientConfig?.region,K),de=!oo(D);t=new s({profile:e?.parentClientConfig?.profile,region:B,requestHandler:de?D:void 0,logger:b})}let{Credentials:n,AssumedRoleUser:d}=yield t.send(new q(o));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${o.RoleArn}`);let c=Zs(d),S=i(i({accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration},n.CredentialScope&&{credentialScope:n.CredentialScope}),c&&{accountId:c});return c&&G(S,"RESOLVED_ACCOUNT_ID","T"),G(S,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),S})},oo=e=>e?.metadata?.handlerProtocol==="h2"});var ro,pn,fn,ui,io=u(()=>{"use strict";no();N();ro=(e,s)=>s?class extends e{constructor(o){super(o);for(let n of s)this.middlewareStack.use(n)}}:e,pn=(e={},s)=>to(e,ro(R,s)),fn=(e={},s)=>so(e,ro(R,s)),ui=e=>s=>e(i({roleAssumer:pn(s),roleAssumerWithWebIdentity:fn(s)},s))});var hn=u(()=>{N();Js();Xs();Qs();io();Z()});export{R as a,x as b,Ts as c,ks as d,ee as e,te as f,se as g,oe as h,ne as i,re as j,Hs as k,Ws as l,ie as m,O as n,q as o,Ke as p,pn as q,fn as r,ui as s,hn as t};
